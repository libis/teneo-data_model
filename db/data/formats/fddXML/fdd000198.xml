<?xml version="1.0" encoding="UTF-8"?>
<fdd:FDD id="fdd000198" titleName="FLAC (Free Lossless Audio Codec), Version 1.1.2" shortName="FLAC_1_1_2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:fdd="http://www.loc.gov/preservation/digital/formats/schemas/fdd/v1" xsi:schemaLocation="http://www.loc.gov/preservation/digital/formats/schemas/fdd/v1 http://www.loc.gov/preservation/digital/formats/schemas/fdd/v1/fdd-v1-1.xsd">
	<fdd:properties>
		<fdd:gdfrGenreSelection>
			<fdd:gdfrGenre>sound</fdd:gdfrGenre>
		</fdd:gdfrGenreSelection>
		<fdd:formatCategories>
			<fdd:category>encoding</fdd:category>
		</fdd:formatCategories>
		<fdd:gdfrComposition>unitary</fdd:gdfrComposition>
		<fdd:gdfrForm>binary</fdd:gdfrForm>
		<fdd:gdfrBasis>sampled</fdd:gdfrBasis>
		<fdd:updates>
			<fdd:date>2015-12-21</fdd:date>
		</fdd:updates>
		<fdd:draftStatus>Full</fdd:draftStatus>
	</fdd:properties>
	<fdd:identificationAndDescription>
		<fdd:fullName>FLAC (Free Lossless Audio Codec), Version 1.1.2</fdd:fullName>
		<fdd:keywords>
			<fdd:keyword>audio formats</fdd:keyword>
		</fdd:keywords>
		<fdd:description>
			<p>Open source bitstream encoding format designed for lossless compression of <fddLink id="fdd000011">LPCM</fddLink> audio data, with many of its default parameters tuned to CD-quality music data.  The encoding is described in <a href="#notes">Notes</a>, below.  The format also includes &quot;transport system&quot; elements that provide a <i>file format</i> for the encoded data. The <a href="https://xiph.org/flac/">FLAC Web site</a> indicates that in some applications there may be advantages to using <fddLink id="fdd000026">Ogg</fddLink> (or Matroska) as a wrapper. <a href="../contact_format.shtml">Comments welcome</a>.</p>
			<p>The format&apos;s sponsors compare FLAC&apos;s level of disclosure, player and hardware support, streamability, and cost with those of other lossless codecs at <a href="https://xiph.org/flac/comparison.html">https://xiph.org/flac/comparison.html</a>.</p>
		</fdd:description>
		<fdd:shortDescription>Open source bitstream encoding format designed for lossless compression of LPCM audio data, with many of its default parameters tuned to CD-quality music data.</fdd:shortDescription>
		<fdd:productionPhase>Generally used for final-state, end-user delivery.</fdd:productionPhase>
		<fdd:relationships>
			<fdd:relationship>
				<fdd:typeOfRelationship>Used by</fdd:typeOfRelationship>
				<fdd:relatedTo>
					<fdd:id>fdd000227</fdd:id>
					<fdd:shortName>Ogg_FLAC</fdd:shortName>
					<fdd:titleName>Ogg FLAC Audio Format</fdd:titleName>
				</fdd:relatedTo>
			</fdd:relationship>
			<fdd:relationship>
				<fdd:typeOfRelationship>Has earlier version</fdd:typeOfRelationship>
				<fdd:comment>FLAC, Version 1.1.1 (Not documented at this Web site at this time)</fdd:comment>
			</fdd:relationship>
			<fdd:relationship>
				<fdd:typeOfRelationship>Has later version</fdd:typeOfRelationship>
				<fdd:comment>FLAC, Version 1.1.3 (November 2005, not documented at this Web site at this time)</fdd:comment>
			</fdd:relationship>
			<fdd:relationship>
				<fdd:typeOfRelationship>Has later version</fdd:typeOfRelationship>
				<fdd:comment>FLAC, Version 1.1.4 (February 2007, not documented at this Web site at this time)</fdd:comment>
			</fdd:relationship>
			<fdd:relationship>
				<fdd:typeOfRelationship>Has later version</fdd:typeOfRelationship>
				<fdd:comment>FLAC, Version 1.2.0 (Not documented at this Web site at this time)</fdd:comment>
			</fdd:relationship>
			<fdd:relationship>
				<fdd:typeOfRelationship>Has later version</fdd:typeOfRelationship>
				<fdd:comment>FLAC, Version 1.3.0 (June 2013, not documented at this Web site at this time)</fdd:comment>
			</fdd:relationship>
			<fdd:relationship>
				<fdd:typeOfRelationship>Has later version</fdd:typeOfRelationship>
				<fdd:comment>FLAC, Version 1.3.1 (November 2014, not documented at this Web site at this time)</fdd:comment>
			</fdd:relationship>
		</fdd:relationships>
	</fdd:identificationAndDescription>
	<fdd:localUse>
		<fdd:experience>None. In late 2005, there was preliminary discussion within the Library&apos;s Motion Picture, Broadcasting, and Recorded Sound Division concerning the use of FLAC files as on-premises listening copies of preservation-project masters.  By 2007, system redesign and increasing bandwidth to the reading (i.e., listening) rooms meant that uncompressed <fddLink id="fdd000002">WAVE_LPCM</fddLink> could be provided and the FLAC proposal was set aside.</fdd:experience>
		<fdd:preference>General preference for master or best copies of recorded sound is <fddLink id="fdd000003">WAVE_LCPM_BWF</fddLink> or <fddLink id="fdd000002">WAVE_LCPM</fddLink>.</fdd:preference>
	</fdd:localUse>
	<fdd:sustainabilityFactors>
		<fdd:disclosure>Fully documented. Developed as an open source project; see history section of <a href="#notes">Notes</a>, below.</fdd:disclosure>
		<fdd:documentation>Published online at <a href="https://xiph.org/flac/format.html">https://xiph.org/flac/format.html</a> and <a href="https://xiph.org/flac/documentation.html">https://xiph.org/flac/documentation.html</a>.</fdd:documentation>
		<fdd:adoption>
			<p>Moderate. Employed by Web sites like Live Music Archive (on this <a href="http://www.archive.org/details/audio/">page</a> as a menu item).  A number of FLAC-capable devices are <a href="https://xiph.org/flac/links.html#hardware">listed</a> at the FLAC site. Software tools exist for encoding and decoding, including plug-ins for browser-related online media players like Winamp.  These are sometimes included in the application or may be downloaded from <a href="https://xiph.org/flac/download.html">https://xiph.org/flac/download.html</a>.</p>
			<p>Originally introduced in the 8.1 update for Windows 8, Microsoft's Windows 10 built-in media player appsÂ include native support for FLAC. According to cnet, "<a href="https://www.cnet.com/tech/services-and-software/five-biggest-changes-to-windows-10-media-playback/">FLAC</a> files now show up in Explorer as the new Windows &apos;G&apos; icon and by default will play in the new Groove player."</p>
		</fdd:adoption>
		<fdd:licensingAndPatents>Documentation and tools are freely distributed under Xiph&apos;s <a href="https://www.xiph.org/licenses/bsd/">variant</a> of the BSD open-source license.</fdd:licensingAndPatents>
		<fdd:transparency>Depends upon algorithms and tools to read; requires sophistication to build tools.</fdd:transparency>
		<fdd:selfDocumentation>
			<p>Appears to be limited to technical metadata.</p>
			<p>From <a href="https://xiph.org/flac/format.html">https://xiph.org/flac/format.html</a>: &#34;A FLAC bitstream consists of the &#39;fLaC&#39; marker at the beginning of the stream, followed by a mandatory metadata block (called the STREAMINFO block), any number of other metadata blocks, then the audio frames. FLAC supports up to 128 kinds of metadata blocks. [The STREAMINFO block] has information about the whole stream, like sample rate, number of channels, total number of samples, etc. It must be present as the first metadata block in the stream. Other metadata blocks may follow, and ones that the decoder doesn&apos;t understand, it will skip.&#34;  Also included in the STREAMINFO block is the MD5 signature of the unencoded audio data.</p>
			<p>From <a href="https://xiph.org/flac/format.html#def_CUESHEET">https://xiph.org/flac/format.html#def_CUESHEET</a>: [The cuesheet] block is for storing various information that can be used in a cue sheet. It supports track and index points, compatible with Red Book CD digital audio discs, as well as other CD-DA metadata such as media catalog number and track ISRCs. The CUESHEET block is especially useful for backing up CD-DA discs, but it can be used as a general purpose cueing mechanism for playback.</p>
		</fdd:selfDocumentation>
		<fdd:externalDependencies>None.</fdd:externalDependencies>
		<fdd:techProtection>None.</fdd:techProtection>
	</fdd:sustainabilityFactors>
	<fdd:qualityAndFunctionalityFactors>
		<fdd:soundQF>
			<fdd:normalSound>Good support.</fdd:normalSound>
			<fdd:fidelity>Potentially excellent. FLAC supports linear PCM samples at rates from 1Hz - 655350Hz and bit depth resolution between 4 and 32 bits per sample.</fdd:fidelity>
			<fdd:channels>From <a href="https://xiph.org/flac/faq.html#general__channels">https://xiph.org/flac/faq.html#general__channels</a>: &quot;FLAC supports from 1 to 8 channels per stream. Channels are only grouped in FLAC to take advantage of interchannel correlation and to define common channel assignments (like stereo L/R, 5.1 surround, et cetera). When encoding a large number of independent channels it is expected that they are coded separately and if required, multiplexed together in a suitable container like Ogg or Matroska.&quot;</fdd:channels>
			<fdd:samples>Not applicable.</fdd:samples>
			<fdd:beyondSound>One specialist in the field reports two fixity elements in FLAC: <a href="http://dericed.com/papers/reconsidering-the-checksum-for-audiovisual-preservation/">first</a>,"the header of a FLAC file contains an MD5 checksum or signature that represents the original audio data that is encoded,&quot; and <a href="http://dericed.com/2013/flac-in-the-archives/">second</a> that &quot;deeper within the FLAC file, audio samples are grouped into audio frames which themselves are checksummed with a crc value.&quot;  In addition, the <a href="https://xiph.org/flac/format.html#subset">specification reports</a> that FLAC is streamable in a computer network if some constraints are applied; see . Later versions (post 1.1.2) include support for images and other content elements.</fdd:beyondSound>
		</fdd:soundQF>
	</fdd:qualityAndFunctionalityFactors>
	<fdd:fileTypeSignifiers>
		<fdd:signifiersGroup>
			<fdd:filenameExtension>
				<fdd:sigValues>
					<fdd:sigValue>flac</fdd:sigValue>
					<fdd:sigValue>fla</fdd:sigValue>
				</fdd:sigValues>
				<fdd:note>
					<i>flac</i> is preferred; both are documented at <a href="https://filext.com/">The File Extension Source</a>.</fdd:note>
			</fdd:filenameExtension>
			<fdd:internetMediaType>
				<fdd:sigValues>
					<fdd:sigValue>audio/flac</fdd:sigValue>
				</fdd:sigValues>
				<fdd:note>From <a href="https://filext.com/">The File Extension Source</a>.</fdd:note>
			</fdd:internetMediaType>
			<fdd:magicNumbers>
				<fdd:sigValues>
					<fdd:sigValue>Hex: 66 4C 61 43 00 00 00 22</fdd:sigValue>
					<fdd:sigValue>ASCII: fLaC</fdd:sigValue>
				</fdd:sigValues>
				<fdd:note>From <a href="https://filext.com/">The File Extension Source</a>. <a href="https://xiph.org/flac/format.html#stream">https://xiph.org/flac/format.html#stream</a> states that &quot;the stream begins with fLaC (the FLAC stream marker in ASCII), meaning byte 0 of the stream is 0x66, followed by 0x4C 0x61 0x43.&quot;</fdd:note>
			</fdd:magicNumbers>
		</fdd:signifiersGroup>
	</fdd:fileTypeSignifiers>
	<fdd:notes>
		<fdd:general>
			<p>
				<b>Transport system, native file format.</b> (from <a href="https://xiph.org/flac/ogg_mapping.html">https://xiph.org/flac/ogg_mapping.html</a>):<br/>
The original FLAC format includes a very thin transport system. This system of compressed FLAC audio data mixed with a thin transport has come to be known as &apos;native FLAC&apos;. The transport consists of audio frame headers and footers which contain synchronization patterns, timecodes, and checksums (but notably not frame lengths), and a metadata system. It is very lightweight and does not support more elaborate transport mechanisms such as multiple logical streams, but it has served its purpose well. The native FLAC transport is not a transport &quot;layer&quot; in the way of standard codec design because it cannot be entirely separated from the payload. Though the metadata system can be separated, the frame header includes both data that belongs in the transport (sync pattern, timecode, checksum) and data that belongs in the compressed packets (audio parameters like channel assignments, sample rate, etc).</p>
			<p>
				<b>Coding.</b> (from <a href="https://xiph.org/flac/format.html">https://xiph.org/flac/format.html</a>):<br/>
Encoding stages include:</p>
			<ul>
				<li>Blocking. The input is broken up into many contiguous blocks. With FLAC, the blocks may vary in size. The optimal size of the block is usually affected by many factors, including the sample rate, spectral characteristics over time, etc. Though FLAC allows the block size to vary within a stream, the reference encoder uses a fixed block size.</li>
				<li>Interchannel Decorrelation. In the case of stereo streams, the encoder will create mid and side signals based on the average and difference (respectively) of the left and right channels. The encoder will then pass the best form of the signal to the next stage.</li>
				<li>Prediction. The block is passed through a prediction stage where the encoder tries to find a mathematical description (usually an approximate one) of the signal. This description is typically much smaller than the raw signal itself. Since the methods of prediction are known to both the encoder and decoder, only the parameters of the predictor need be included in the compressed stream. FLAC currently uses four different classes of predictors . . . , but the format has reserved space for additional methods. FLAC allows the class of predictor to change from block to block, or even within the channels of a block.</li>
				<li>Residual coding. If the predictor does not describe the signal exactly, the difference between the original signal and the predicted signal (called the error or residual signal) must be coded losslessy. If the predictor is effective, the residual signal will require fewer bits per sample than the original signal. FLAC currently uses only one method for encoding the residual (see the Residual coding section), but the format has reserved space for additional methods.</li>
			</ul>
			<p>
				<b>Versions.</b>  Information about FLAC versions is provided on the FLAC <a href="https://xiph.org/flac/changelog.html">changelog</a> page.</p>
		</fdd:general>
		<fdd:history>
			<p>FLAC appears to have been developed by Josh Coalson; the <a href="https://xiph.org/flac/">FLAC Web site</a> carries Coalson&apos;s name in copyright notices dated from 2000 forward. The <a href="https://en.wikipedia.org/wiki/FLAC">Wikipedia FLAC</a> entry (consulted on September 14, 2007) states that on &quot;January 29th, 2003, Xiphophorus (now called the Xiph.Org Foundation) announced the incorporation of FLAC under their Xiph.Org banner, to go along with Ogg Vorbis, Ogg Theora, and Speex.&quot;</p>
			<p>As of October 2013, documentation had migrated from a sourceforge wiki to xiph.org.  In May 2013, the first software update in six years, to version 1.3.0, was published.</p>
			<p>An offshoot of the European-based <a href="http://www.preforma-project.eu/">PREFORMA</a> project, which aims &quot;to address the challenge of implementing good quality standardised file formats for preserving data content in the long term,&quot; <a href="https://datatracker.ietf.org/wg/cellar/charter/">Codec Encoding for LossLess Archiving and Realtime transmission (cellar)</a>Â is an IETF-approved project to standardize FLAC, <fddLink id="fdd000342">Matroska</fddLink>, Â and <fddLink id="fdd000341">FFV1</fddLink>.</p>
		</fdd:history>
	</fdd:notes>
	<fdd:formatSpecifications>
		<fdd:urls>
			<fdd:url>
				<fdd:urlReference>
					<link>https://xiph.org/flac/format.html</link>
					<tag>FLAC format documentation</tag>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>https://xiph.org/flac/documentation.html</link>
					<tag>FLAC general documentation</tag>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>https://xiph.org/flac/ogg_mapping.html</link>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>https://datatracker.ietf.org/doc/charter-ietf-cellar/</link>
					<tag>IETF Charter for CELLAR Project (Codec Encoding for LossLess Archiving and Realtime transmission)</tag>
					<comment>IETF Working Group page, including specifications for FFV1, Matroska, FLAC and EBML</comment>
				</fdd:urlReference>
			</fdd:url>
		</fdd:urls>
	</fdd:formatSpecifications>
	<fdd:usefulReferences>
		<fdd:urls>
			<fdd:url>
				<fdd:urlReference>
					<link>https://xiph.org/flac/</link>
					<tag>What is FLAC?</tag>
					<comment>Home page for FLAC.</comment>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>http://dericed.com/papers/reconsidering-the-checksum-for-audiovisual-preservation/</link>
					<tag>Reconsidering the Checksum for Audiovisual Preservation</tag>
					<comment>Online article by Dave Rice, CUNY.</comment>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>http://dericed.com/2013/flac-in-the-archives/</link>
					<tag>FLAC in the Archives</tag>
					<comment>Online article by Dave Rice, CUNY, discussing preservation qualities of FLAC and BWF as well as FLAC's fixity capabilities.</comment>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>https://www.cnet.com/tech/services-and-software/five-biggest-changes-to-windows-10-media-playback/</link>
					<tag>The Five Biggest Changes to Media Playback in Windows 10</tag>
					<comment>Online article from cnet describing Windows 10 capabilities for video and other rich media</comment>
				</fdd:urlReference>
			</fdd:url>
			<fdd:url>
				<fdd:urlReference>
					<link>http://www.preforma-project.eu/</link>
					<tag>PREFORMA, PREservation FORMAts for culture information/e-archives</tag>
					<comment>Collaborative EU-funded project with goal of "implementing good quality standardised file formats" including Matroska, FLAC and FFV1</comment>
				</fdd:urlReference>
			</fdd:url>
		</fdd:urls>
	</fdd:usefulReferences>
</fdd:FDD>
